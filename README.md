# 点滴卫士-智慧输液报警系统

点滴卫士是一个智能输液监控系统，通过物联网技术实现对医院输液过程的实时监控、预警和管理，提高医疗安全和效率。

## 项目概述

本系统由硬件端、接收端、后端服务和微信小程序组成，实现了输液过程中的液位监测、剩余时间预测、异常报警等功能，并通过华为云IoT平台实现数据的云端存储和处理。

## 系统架构

```
点滴卫士
├── 硬件端 - ESP32主控制器，负责液位检测和数据采集
├── ESP-NOW接收端 - 接收硬件端数据并上传至云平台
├── 后端可视化大屏 - 数据展示和管理界面
└── 微信小程序 - 移动端监控和通知
```

## 主要功能

- **实时液位监测**：通过传感器实时监测输液瓶液位变化
- **剩余时间预测**：基于液位变化速率预测输液完成时间
- **异常状态报警**：检测输液异常并及时报警
- **数据可视化**：通过Web界面和微信小程序展示监控数据
- **远程监控**：医护人员可远程查看患者输液状态
- **二维码生成**：为每个设备生成唯一标识二维码

## 技术栈

### 硬件端
- ESP32/ESP8266微控制器
- 液位传感器
- ESP-NOW无线通信协议

### 接收端
- ESP32开发板
- U8g2显示库
- PubSubClient MQTT客户端

### 后端服务
- Python Flask框架
- 华为云IoTDA服务
- ECharts数据可视化

### 微信小程序
- 微信小程序开发框架
- 云端API接口

## 目录结构

- **ESP-NOW接收端-1109/**：接收端代码，负责接收硬件数据并上传云端
- **二维码生成代码/**：生成设备唯一标识二维码的工具
- **后端可视化大屏+下云-1109/**：Flask后端和数据可视化界面
- **微信小程序-点滴卫士代码-1109/**：微信小程序前端代码
- **点滴卫士硬件端/**：硬件端主控代码，负责数据采集和传输

## 安装与使用

### 硬件端
1. 使用PlatformIO或Arduino IDE编译上传代码到ESP32/ESP8266
2. 连接传感器和电源

### 接收端
1. 使用PlatformIO编译上传代码到ESP32
2. 配置MQTT连接参数

### 后端服务
1. 安装Python依赖：
```bash
pip install flask flask_cors huaweicloudsdkiotda
```
2. 配置华为云IoT平台参数
3. 运行Flask服务：
```bash
python main.py
```

### 微信小程序
1. 使用微信开发者工具导入项目
2. 配置API接口地址
3. 编译并发布

## 二维码生成工具

系统包含一个Python工具，用于将图像转换为C++数组，便于在OLED显示屏上显示：

```bash
python 二维码生成代码/main.py
```

## 贡献指南

欢迎提交问题和改进建议。如需贡献代码，请遵循以下步骤：
1. Fork本仓库
2. 创建您的特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交您的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开Pull Request

## 许可证

[MIT](LICENSE)

## 联系方式
如有任何问题，请通过[Issues](https://github.com/yourusername/点滴卫士-智慧输液报警系统/issues)联系我们。

